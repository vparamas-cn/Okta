{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _AuthService = _interopRequireDefault(require(\"./AuthService\"));\n\nvar _OktaContext = _interopRequireDefault(require(\"./OktaContext\"));\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n\nvar Security = function Security(props) {\n  var initialAuthService = (0, _react.useMemo)(function () {\n    // don't keep spawning new service instances if this component rerenders\n    return props.authService || new _AuthService[\"default\"](props);\n  }, [props]);\n\n  var _useState = (0, _react.useState)(initialAuthService),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 1),\n      authService = _useState2[0];\n\n  var _useState3 = (0, _react.useState)(authService.getAuthState()),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      authState = _useState4[0],\n      setAuthState = _useState4[1];\n\n  (0, _react.useEffect)(function () {\n    var unsub = authService.on('authStateChange', function () {\n      setAuthState(authService.getAuthState());\n    });\n\n    if (!authService._oktaAuth.token.isLoginRedirect()) {\n      // Trigger an initial change event to make sure authState is latest when not in loginRedirect state\n      authService.updateAuthState();\n    }\n\n    return unsub;\n  }, [authService]);\n  return /*#__PURE__*/_react[\"default\"].createElement(_OktaContext[\"default\"].Provider, {\n    value: {\n      authService: authService,\n      authState: authState\n    }\n  }, props.children);\n};\n\nvar _default = Security;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["../../src/Security.js"],"names":["Security","initialAuthService","props","AuthService","authService","authState","setAuthState","unsub"],"mappings":";;;;;;;;;;;;;AAYA,IAAA,MAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AACA,IAAA,YAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,eAAA,CAAA,CAAA;;AACA,IAAA,YAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,eAAA,CAAA,CAAA;AAdA;;;;;;;;;;;;;AAgBA,IAAMA,QAAQ,GAAG,SAAXA,QAAW,CAAA,KAAA,EAAW;AAE1B,MAAMC,kBAAkB,GAAG,CAAA,GAAA,MAAA,CAAA,OAAA,EAAS,YAAM;AACxC;AACA,WAAOC,KAAK,CAALA,WAAAA,IAAqB,IAAIC,YAAAA,CAAJ,SAAIA,CAAJ,CAA5B,KAA4B,CAA5B;AAFyB,GAAA,EAGxB,CAHH,KAGG,CAHwB,CAA3B;;AAF0B,MAAA,SAAA,GAOJ,CAAA,GAAA,MAAA,CAAA,QAAA,EAPI,kBAOJ,CAPI;AAAA,MAAA,UAAA,GAAA,CAAA,GAAA,eAAA,CAAA,SAAA,CAAA,EAAA,SAAA,EAAA,CAAA,CAAA;AAAA,MAOnBC,WAPmB,GAAA,UAAA,CAAA,CAAA,CAAA;;AAAA,MAAA,UAAA,GAQQ,CAAA,GAAA,MAAA,CAAA,QAAA,EAASA,WAAW,CAR5B,YAQiBA,EAAT,CARR;AAAA,MAAA,UAAA,GAAA,CAAA,GAAA,eAAA,CAAA,SAAA,CAAA,EAAA,UAAA,EAAA,CAAA,CAAA;AAAA,MAQnBC,SARmB,GAAA,UAAA,CAAA,CAAA,CAAA;AAAA,MAQRC,YARQ,GAAA,UAAA,CAAA,CAAA,CAAA;;AAU1B,GAAA,GAAA,MAAA,CAAA,SAAA,EAAW,YAAM;AACf,QAAMC,KAAK,GAAG,WAAW,CAAX,EAAA,CAAA,iBAAA,EAAkC,YAAM;AACpDD,MAAAA,YAAY,CAACF,WAAW,CAAxBE,YAAaF,EAAD,CAAZE;AADF,KAAc,CAAd;;AAIA,QAAI,CAACF,WAAW,CAAXA,SAAAA,CAAAA,KAAAA,CAAL,eAAKA,EAAL,EAAoD;AAClD;AACAA,MAAAA,WAAW,CAAXA,eAAAA;AACD;;AACD,WAAA,KAAA;AATF,GAAA,EAUG,CAVH,WAUG,CAVH;AAYA,SAAA,aACE,MAAA,CAAA,SAAA,CAAA,CAAA,aAAA,CAAC,YAAA,CAAD,SAAC,CAAA,CAAD,QAAA,EAAA;AAAsB,IAAA,KAAK,EAAG;AAAEA,MAAAA,WAAW,EAAb,WAAA;AAAeC,MAAAA,SAAS,EAATA;AAAf;AAA9B,GAAA,EACGH,KAAK,CAFV,QACE,CADF;AAtBF,CAAA;;eA6BeF,Q","sourcesContent":["/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport AuthService from './AuthService';\nimport OktaContext from './OktaContext';\n\nconst Security = (props) => { \n\n  const initialAuthService = useMemo( () => { \n    // don't keep spawning new service instances if this component rerenders\n    return props.authService || new AuthService(props);\n  }, [ props ]);\n\n  const [authService] = useState( initialAuthService );\n  const [authState, setAuthState] = useState(authService.getAuthState());\n  \n  useEffect( () => { \n    const unsub = authService.on('authStateChange', () => {\n      setAuthState(authService.getAuthState());\n    });\n\n    if (!authService._oktaAuth.token.isLoginRedirect()) {\n      // Trigger an initial change event to make sure authState is latest when not in loginRedirect state\n      authService.updateAuthState(); \n    }\n    return unsub;\n  }, [authService]);\n\n  return (\n    <OktaContext.Provider value={ { authService, authState } }>\n      {props.children}\n    </OktaContext.Provider>\n  );\n};\n\nexport default Security;\n"]},"metadata":{},"sourceType":"script"}